#!/usr/bin/env bash
# bin/detect - Determines if the buildpack should be applied

set -e

BUILD_DIR=$1

# Node.js app directory must be specified via BP_NODE_APP_DIR
NODE_APP_DIR="${BP_NODE_APP_DIR}"

# Check if this is a crypto-broker application
if [ -d "$BUILD_DIR/crypto-broker-server" ] && [ -d "$BUILD_DIR/$NODE_APP_DIR" ]; then
    echo "Crypto Broker Application (Node app: $NODE_APP_DIR)"
    exit 0
fi

exit 1
