#!/usr/bin/env bash
# bin/finalize - Final setup before launch

set -e

BUILD_DIR=$1
CACHE_DIR=$2
DEPS_DIR=$3
DEPS_IDX=$4

# Node.js app directory must be specified via BP_NODE_APP_DIR
NODE_APP_DIR="${BP_NODE_APP_DIR}"

echo "-----> Finalizing Crypto Broker Application"
echo "-----> Node.js app directory: $NODE_APP_DIR"

# Node.js buildpack will handle building the client
# We just verify it's ready
if [ -d "$BUILD_DIR/$NODE_APP_DIR" ]; then
    echo "-----> Node.js application directory found: $NODE_APP_DIR"
    if [ -f "$BUILD_DIR/$NODE_APP_DIR/package.json" ]; then
        echo "-----> package.json found"
    fi
fi

echo "-----> Finalization complete"
