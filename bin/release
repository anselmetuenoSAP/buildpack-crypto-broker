#!/usr/bin/env bash
# bin/release - Provides default process types

# Node.js app directory and entry point must be specified via environment variables
if [ -z "${BP_NODE_APP_DIR}" ]; then
    echo "ERROR: BP_NODE_APP_DIR environment variable is required but not set" >&2
    exit 1
fi

if [ -z "${BP_NODE_APP_ENTRY}" ]; then
    echo "ERROR: BP_NODE_APP_ENTRY environment variable is required but not set" >&2
    exit 1
fi

NODE_APP_DIR="${BP_NODE_APP_DIR}"
NODE_APP_ENTRY="${BP_NODE_APP_ENTRY}"

cat <<EOF
---
default_process_types:
  web: crypto-broker-server/cryptobroker-server & sleep 2 && cd $NODE_APP_DIR && node $NODE_APP_ENTRY
EOF
